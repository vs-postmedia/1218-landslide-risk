(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();function T(){}function ye(e,t){for(const n in t)e[n]=t[n];return e}function re(e){return e()}function X(){return Object.create(null)}function M(e){e.forEach(re)}function oe(e){return typeof e=="function"}function P(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let $;function be(e,t){return $||($=document.createElement("a")),$.href=t,e===$.href}function _e(e){return Object.keys(e).length===0}function ve(e,t,n,r){if(e){const o=ie(e,t,n,r);return e[0](o)}}function ie(e,t,n,r){return e[1]&&r?ye(n.ctx.slice(),e[1](r(t))):n.ctx}function we(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(t.dirty===void 0)return o;if(typeof o=="object"){const i=[],s=Math.max(t.dirty.length,o.length);for(let l=0;l<s;l+=1)i[l]=t.dirty[l]|o[l];return i}return t.dirty|o}return t.dirty}function xe(e,t,n,r,o,i){if(o){const s=ie(t,n,r,i);e.p(s,o)}}function ke(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function _(e,t){e.appendChild(t)}function E(e,t,n){e.insertBefore(t,n||null)}function k(e){e.parentNode&&e.parentNode.removeChild(e)}function Se(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function se(e){return document.createTextNode(e)}function L(){return se(" ")}function Be(){return se("")}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Ee(e){return Array.from(e.childNodes)}function Y(e,t,n,r){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Z(e,t,n){e.classList[n?"add":"remove"](t)}let D;function z(e){D=e}function Ce(){if(!D)throw new Error("Function called outside component initialization");return D}function le(e){Ce().$$.on_mount.push(e)}const B=[],F=[];let C=[];const q=[],Ae=Promise.resolve();let R=!1;function ze(){R||(R=!0,Ae.then(ce))}function j(e){C.push(e)}function ae(e){q.push(e)}const N=new Set;let S=0;function ce(){if(S!==0)return;const e=D;do{try{for(;S<B.length;){const t=B[S];S++,z(t),De(t.$$)}}catch(t){throw B.length=0,S=0,t}for(z(null),B.length=0,S=0;F.length;)F.pop()();for(let t=0;t<C.length;t+=1){const n=C[t];N.has(n)||(N.add(n),n())}C.length=0}while(B.length);for(;q.length;)q.pop()();R=!1,N.clear(),z(e)}function De(e){if(e.fragment!==null){e.update(),M(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(j)}}function Fe(e){const t=[],n=[];C.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),C=t}const O=new Set;let Ie;function H(e,t){e&&e.i&&(O.delete(e),e.i(t))}function G(e,t,n,r){if(e&&e.o){if(O.has(e))return;O.add(e),Ie.c.push(()=>{O.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function ue(e,t,n){const r=e.$$.props[t];r!==void 0&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function fe(e){e&&e.c()}function K(e,t,n,r){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),r||j(()=>{const s=e.$$.on_mount.map(re).filter(oe);e.$$.on_destroy?e.$$.on_destroy.push(...s):M(s),e.$$.on_mount=[]}),i.forEach(j)}function U(e,t){const n=e.$$;n.fragment!==null&&(Fe(n.after_update),M(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function $e(e,t){e.$$.dirty[0]===-1&&(B.push(e),ze(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function V(e,t,n,r,o,i,s,l=[-1]){const f=D;z(e);const a=e.$$={fragment:null,ctx:[],props:i,update:T,not_equal:o,bound:X(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:X(),dirty:l,skip_bound:!1,root:t.target||f.$$.root};s&&s(a.root);let p=!1;if(a.ctx=n?n(e,t.props||{},(u,g,...m)=>{const b=m.length?m[0]:g;return a.ctx&&o(a.ctx[u],a.ctx[u]=b)&&(!a.skip_bound&&a.bound[u]&&a.bound[u](b),p&&$e(e,u)),g}):[],a.update(),p=!0,M(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const u=Ee(t.target);a.fragment&&a.fragment.l(u),u.forEach(k)}else a.fragment&&a.fragment.c();t.intro&&H(e.$$.fragment),K(e,t.target,t.anchor,t.customElement),ce()}z(f)}class J{$destroy(){U(this,1),this.$destroy=T}$on(t,n){if(!oe(n))return T;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(t){this.$$set&&!_e(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ee=['Debris flows are common in B.C.\u2019s coastal coastal mountains because heavy rains fall on steep slopes covered in loose sediment. The Sea to Sky Highway between Horseshoe Bay and Britannia has a history of destructive debris flows. <span class="scroll-more">Scroll for more...</span>',"Heavy rains can swell streams along the mountain crest and cause sediment to slide into the rapid waters, forming debris flows.","The debris flows can pick up trees, sediment and speed up as they pass through mountainside canyons.","As the debris flows exit the canyons, they form a fan that can damage roads, bridges and homes."];function Le(e){let t,n;const r=e[7].default,o=ve(r,e,e[6],null);return{c(){t=y("div"),o&&o.c()},m(i,s){E(i,t,s),o&&o.m(t,null),e[8](t),n=!0},p(i,[s]){o&&o.p&&(!n||s&64)&&xe(o,r,i,i[6],n?we(r,i[6],s,null):ke(i[6]),null)},i(i){n||(H(o,i),n=!0)},o(i){G(o,i),n=!1},d(i){i&&k(t),o&&o.d(i),e[8](null)}}}function Oe(e,t,n){let{$$slots:r={},$$scope:o}=t,{root:i=null}=t,{top:s=0}=t,{bottom:l=0}=t,{increments:f=100}=t,{value:a=void 0}=t;const p=[],u=[];let g=[],m=[],b;const A=()=>{!g.length||g.forEach(v)},d=()=>{let c=0,w=0;for(let x=0;x<p.length;x++)p[x]>c&&(c=p[x],w=x);c>0?n(1,a=w):n(1,a=void 0)},v=(c,w)=>{const x=W=>{W[0].isIntersecting;const ge=W[0].intersectionRatio;p[w]=ge,d()},de=s?s*-1:0,pe=l?l*-1:0,me=`${de}px 0px ${pe}px 0px`,he={root:i,rootMargin:me,threshold:u};m[w]&&m[w].disconnect();const Q=new IntersectionObserver(x,he);Q.observe(c),m[w]=Q};le(()=>{for(let c=0;c<f+1;c++)u.push(c/f);g=b.querySelectorAll(":scope > *"),A()});function I(c){F[c?"unshift":"push"](()=>{b=c,n(0,b)})}return e.$$set=c=>{"root"in c&&n(2,i=c.root),"top"in c&&n(3,s=c.top),"bottom"in c&&n(4,l=c.bottom),"increments"in c&&n(5,f=c.increments),"value"in c&&n(1,a=c.value),"$$scope"in c&&n(6,o=c.$$scope)},e.$$.update=()=>{e.$$.dirty&24&&A()},[b,a,i,s,l,f,o,r,I]}class Me extends J{constructor(t){super(),V(this,t,Oe,Le,P,{root:2,top:3,bottom:4,increments:5,value:1})}}function te(e,t,n){const r=e.slice();return r[2]=t[n],r[4]=n,r}function ne(e){let t,n,r,o=e[2]+"",i;return{c(){t=y("li"),n=y("div"),r=y("p"),i=L(),h(n,"class","step-content svelte-ni7ye2"),h(t,"class","step svelte-ni7ye2"),Z(t,"active",e[0]===e[4])},m(s,l){E(s,t,l),_(t,n),_(n,r),r.innerHTML=o,_(t,i)},p(s,l){l&1&&Z(t,"active",s[0]===s[4])},d(s){s&&k(t)}}}function He(e){let t,n=ee,r=[];for(let o=0;o<n.length;o+=1)r[o]=ne(te(e,n,o));return{c(){for(let o=0;o<r.length;o+=1)r[o].c();t=Be()},m(o,i){for(let s=0;s<r.length;s+=1)r[s]&&r[s].m(o,i);E(o,t,i)},p(o,i){if(i&1){n=ee;let s;for(s=0;s<n.length;s+=1){const l=te(o,n,s);r[s]?r[s].p(l,i):(r[s]=ne(l),r[s].c(),r[s].m(t.parentNode,t))}for(;s<r.length;s+=1)r[s].d(1);r.length=n.length}},d(o){Se(r,o),o&&k(t)}}}function Ne(e){let t,n,r;function o(s){e[1](s)}let i={$$slots:{default:[He]},$$scope:{ctx:e}};return e[0]!==void 0&&(i.value=e[0]),t=new Me({props:i}),F.push(()=>ue(t,"value",o)),{c(){fe(t.$$.fragment)},m(s,l){K(t,s,l),r=!0},p(s,[l]){const f={};l&33&&(f.$$scope={dirty:l,ctx:s}),!n&&l&1&&(n=!0,f.value=s[0],ae(()=>n=!1)),t.$set(f)},i(s){r||(H(t.$$.fragment,s),r=!0)},o(s){G(t.$$.fragment,s),r=!1},d(s){U(t,s)}}}function Te(e,t,n){let{currentStep:r}=t;function o(i){r=i,n(0,r)}return e.$$set=i=>{"currentStep"in i&&n(0,r=i.currentStep)},[r,o]}class qe extends J{constructor(t){super(),V(this,t,Te,Ne,P,{currentStep:0})}}function Re(e){let t,n,r,o,i,s,l,f,a,p,u,g,m;function b(d){e[1](d)}let A={};return e[0]!==void 0&&(A.currentStep=e[0]),u=new qe({props:A}),F.push(()=>ue(u,"currentStep",b)),{c(){t=y("section"),n=y("header"),n.innerHTML="<h1>How landslides form in Howe Sound</h1>",r=L(),o=y("div"),i=y("iframe"),l=L(),f=y("footer"),f.innerHTML=`<p class="source">Source:
            <a href="https://web.viu.ca/earle/howe-sound/" target="_blank">Geological Survey of Canada</a>,
            <a href="https://www.earthdata.nasa.gov/data/instruments/srtm" target="_blank">NASA</a>,
            <a href="https://www.openstreetmap.org/" target="_blank">OSM.org</a></p> 
        
        <div style="width:100%!;margin-top:4px!important;text-align:right!important;"><a class="flourish-credit" href="https://public.flourish.studio/visualisation/3706064/?utm_source=embed&amp;utm_campaign=visualisation/3706064" target="_top" style="text-decoration:none!important"><img alt="Made with Flourish" src="https://public.flourish.studio/resources/made_with_flourish.svg" style="width:105px!important;height:16px!important;border:none!important;margin:0!important;"/></a></div>`,a=L(),p=y("ul"),fe(u.$$.fragment),be(i.src,s=Pe)||h(i,"src",s),h(i,"frameborder","0"),h(i,"scrolling","no"),Y(i,"width","100%"),Y(i,"height",je),h(i,"title","flourish-embed"),h(i,"class","svelte-1tybyu7"),h(o,"class","chart sticky svelte-1tybyu7"),h(f,"class","svelte-1tybyu7"),h(t,"class","scrollyteller sticky svelte-1tybyu7"),h(p,"class","steps svelte-1tybyu7")},m(d,v){E(d,t,v),_(t,n),_(t,r),_(t,o),_(o,i),_(t,l),_(t,f),E(d,a,v),E(d,p,v),K(u,p,null),m=!0},p(d,[v]){const I={};!g&&v&1&&(g=!0,I.currentStep=d[0],ae(()=>g=!1)),u.$set(I)},i(d){m||(H(u.$$.fragment,d),m=!0)},o(d){G(u.$$.fragment,d),m=!1},d(d){d&&k(t),d&&k(a),d&&k(p),U(u)}}}const je="575px",Pe="https://flo.uri.sh/story/2782064/embed";function Ge(e,t,n){let r,o;const i=function(l){o=document.querySelector("#app .chart > iframe"),o.src=o.src.replace(/#slide-.*/,"")+"#slide-"+l};le(()=>{document.querySelectorAll("li.step").forEach(l=>{l.addEventListener("touchstart",()=>{document.querySelector("iframe").style.pointerEvents="none"}),l.addEventListener("touchend",()=>{document.querySelector("iframe").style.pointerEvents="auto"})})});function s(l){r=l,n(0,r)}return e.$$.update=()=>{e.$$.dirty&1&&(r===0||r===1||r===2||r===3)&&i(r)},[r,s]}class Ke extends J{constructor(t){super(),V(this,t,Ge,Re,P,{})}}new Ke({target:document.getElementById("app")});
